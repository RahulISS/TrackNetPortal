<div class="homepage">
	<div class="withtree map-100" > 
		<div class="viewtemplateInner">
			<div class="homemaparea" id="item">
				<div id="homeMap" class="homeleft" >
				</div>
			</div>
		</div>
		<div class="view-style">
			<button class="reset_btn" ng-click="resetMapClick()">Reset</button>
			<div class="cale-ico">
				
				<img src="img/collapse.png" alt="">
			</div>
			<select ng-model="installation_name" id="" ng-change="GetTableItemsBySlected(installation_name)" ng-options="inst_item as inst_item.installationName for inst_item in dataLocation">
			<option ng-selected="true" value="">Select Installation...</option>
			</select>
		</div>
		<script>
			// map width inc desc
			$('.cale-ico').on('click', function () {
				$('body').find('.withtree').toggleClass('map-50');
			});
		</script>
	</div>
	<div class="side-det">
		<table class="elem" data-ng-init="init()" style="bottom: 1px solid black;"> 
			<thead style="background-color: #3255a2">
				<tr style="color: aliceblue;">
					<th>Site Name/Location</th>
					<th>Distance (mm)</th>
					<th>Bench Depth (mm)</th>
					<th>Angle (deg)</th>
					<th>Last Comm.</th>
				</tr>
			</thead>
			<tbody>
				
				<a href="#"><tr ng-repeat="item in sortedArray_1 | filter : installation_name " ng-click="GetTableItemsByClick(item)">
					<td class="changeMouse">{{item.installationName}}
							<br>{{item.address}}</td>
					<td class="changeMouse" ng-class="{'tdAllClear': item.disColorRank == 3  , 'alarmColor': item.distance_alarm_tr === 'Distance alarm Triggered', 'alertColor':  item.distance_alarm_tr === 'Distance alert Triggered' }" > {{ item.distance }} </td>
					<td></td>
					<td class="changeMouse" ng-class="{'tdAllClear': item.angleColorRank == 3, 'alarmColor': item.angle_alarm_tr === 'Angle alarm Triggered', 'alertColor': item.angle_alarm_tr === 'Angle alert Triggered' }" >{{item.angle}}</td>
					<td class="changeMouse" ng-class="{'tdAllClear': item.lastCommColorRank == 3, 'alarmColor': item.lastComm_alarm_tr === 'Communications alarm Triggered', 'alertColor': item.lastComm_alarm_tr === 'Communications alert Triggered' }">{{item.oldest_comm_date}}</td>
				</tr></a>
			</tbody>
		</table>
	</div>
	<!-- Popup start -->
	<div id="popupModalCenter" class="modal d-block" tabindex="-1" role="dialog" aria-labelledby="popupCenterTitle">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="popup-wrap">
					<button type="button" class="close-button" ng-click="closeModal()" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">Ã—</span>
					</button>
					<h2>SETTINGS</h2>
					<!-- <form  method="post" name="manholeSpecification" id="manholeSpecification" ng-submit="manholeSpecificationsformData()"> -->
					<form action="" id="myForm">
						<section class="mhole">
							<div class="mhole-mobile">
								<h4>Manhole Specifications</h4>
								<div class="mhole-image">
								<img src="img/inner-image.png" alt="">
								</div>
								<div class="mhole-content">
								<div class="mhole-text">
									<p>TracNet Sensor</p>
								</div>
								<div class="mhole-alert boundaryOne">
									<label for="">Full (100%)</label>
									<input type="number" ng-readonly="isReadOnly" min="400" name="fullValue" id="fullValue" placeholder="400 mm" value="{{pointSettingData.full}}">
									<span id="errorname" style="display: none; color: red; position: absolute; top: 33px; right: -19px;">Invalid value*</span>
								</div> 
								<div class="mhole-alert traingles" ng-show="showAlert1">
								<!-- <div class="mhole-alert traingles" ng-show="altCount == 3"> -->
									<!-- <button ng-click="onDecreaseAlertNumber({{alarmCount}})">Alert</button> -->
									<label for="" ng-click='onDecreaseAlertNumber("Alert1")'>Alert</label>
									<input type="number" ng-readonly="isReadOnly" name="alert1" id="alert1" ng-model="alert1" placeholder="1000 mm" value="{{pointSettingData.alarmFirst}}">
								</div>
								<div class="mhole-alert squares" ng-show="showAlert2">
								<!-- <div class="mhole-alert squares" ng-show="altCount == 2 || altCount == 3"> -->
									<label for="" ng-click='onDecreaseAlertNumber("Alert2")'>Alert</label>
									<input type="number" ng-readonly="isReadOnly" name="alert2" id="alert2" ng-model="alert2" placeholder="2000 mm" value="{{pointSettingData.alarmSecond}}">
								</div>
								<div class="mhole-alert circles" ng-show="showAlert3">
									<label for="" ng-click='onDecreaseAlertNumber("Alert3")'>Alert</label>
										<input type="number" ng-readonly="isReadOnly" name="alert3" id="alert3" ng-model="alert3" placeholder="3000 mm" value="{{pointSettingData.alarmThird}}">
									<!-- <button type="button" class="cross-btn">x</button> -->
								</div>
								<div class="mhole-alert boundaryTwo">
									<label for="">Empty (0%)</label>
									<input type="number" ng-readonly="isReadOnly" name="emptyValue" max="3998" id="emptyValue" placeholder="3998 mm" value="{{pointSettingData.empty}}">
										<span id="errorn" style="display: none; color: red; position: absolute; top: 33px; right: -19px;">Invalid value*</span>
									<!-- <button type="button" class="cross-btn">x</button> -->
								</div>
								</div>
								<div class="alert-input">
									<label for="">Number of Alerts</label>
									<input type="number" class="alertNumber" id="alertNo" ng-readonly="isReadOnly"  max="3" min="0" value="{{alarmCount}}" ng-model="alarmCount" ng-change="confirmCheck({{alarmCount}})">
									<!-- <p>3</p> -->
								</div>
								<div class="alert-checkbox">
									<div class="checkbox">
										<input type="checkbox" class="hideBoundaries" name="" id="">
										<label for="">Hide Boundaries</label>
									</div>
									<div class="checkbox">
										<input type="checkbox" class="hideAlerts" name="" id="">
										<label for="">Hide Alerts</label>
									</div>
								</div>
								<div class="buttons">
									<input type="button" value="Submit" ng-click="SavePoppupFormData()" class="save-btn submit__btn">
									<input type="reset" class="cancel-btn reset__btn" />
								<!-- <button class="cancel-btn" ng-click="closeModal()">Cancel, Go Back</button> -->
								</div>
							</div>
						</section>
					</form>
				</div>
			</div>
		</div>
		
	</div>
	<div class="loader" ng-show="isLoading">
			<div class="loader-spinner"></div>
		</div>
	<script>
		var enableDistanceAlarmCheckbox = document.getElementById("enableDistanceAlarm");
		

		function checkDistanceAlarmValidity() {
			var input = document.getElementById("distance_alarm");
			var errorMsg = document.getElementById("distanceAlarmError");
			if (input.validity.rangeOverflow || input.validity.rangeUnderflow) {
				errorMsg.style.display = "inline";
			} else {
				errorMsg.style.display = "none";
			}
		}

		var enableDistanceAlarmCheckbox = document.getElementById("enableDistanceAlarm");
		enableDistanceAlarmCheckbox.addEventListener("change", function() {
		var attributeValue = enableDistanceAlarmCheckbox.getAttribute("myAttribute");
		if (attributeValue === '1') {
			enableDistanceAlarmCheckbox.value = "0";
			enableDistanceAlarmCheckbox.classList.remove("checked-me");
			enableDistanceAlarmCheckbox.setAttribute("myAttribute", "0");
		} else {
			enableDistanceAlarmCheckbox.value = "1";
			enableDistanceAlarmCheckbox.classList.add("checked-me");
			enableDistanceAlarmCheckbox.setAttribute("myAttribute", "1");
		}
		});

	</script>
	<script>
		$(document).on("click", ".hideBoundaries", function() {
			if($(this).is(":checked")) {
				$(".boundaryTwo").hide();
				$(".boundaryOne").hide();
			} else {
				$(".boundaryTwo").show();
				$(".boundaryOne").show();
			}
		});
		$(document).on("click", ".hideAlerts", function() {
			if($(this).is(":checked")) {
				$('.circles').hide();
				$('.traingles').hide();
				$('.squares').hide();
			} else {
				$('.circles').show();
				$('.traingles').show();
				$('.squares').show();
			}
		});

		$(document).on("input", "#fullValue", function() {
			var fValue = $(this).val();
			if(parseInt(fValue) >= 400 && parseInt(fValue) <= 3998){
				$('#errorname').hide();
			}else{
				$('#errorname').show();
			}
		});
		$(document).on("input", "#emptyValue", function() {
			var fullValue = $('#fullValue').val();
			var eValue = $(this).val();
			if((parseInt(eValue) > parseInt(fullValue) && parseInt(eValue) <= 3998 )){
				$('#errorn').hide();
			}else{
				$('#errorn').show();
			}
		});
	</script> 
		
	<!-- Popup end-->
	<script>
		// popup start
		$(document).ready(function () {
		$(".close-button").click(function () {
			$("#popupModalCenter").removeClass("show-modal");
		});	
		});
		// popup end
	</script>
</div>